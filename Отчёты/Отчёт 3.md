# Анализ Качества Кода и Предложения по Модификации

## 1. Оценка Качественных Характеристик Кода

В рамках Задания 3 был проведен анализ исходного кода приложения (`main_app.py`, `gui.py`, `database_module.py`) по ряду качественных характеристик.

| Характеристика | Оценка | Комментарий |
| --- | --- | --- |
| **Полнота Обработки Ошибочных Данных** | **Удовлетворительно** | Реализована обработка ошибок БД (`database_module.py`) и ошибок аутентификации/ввода в GUI. Однако отсутствует сквозная валидация всех полей ввода в интерфейсе. |
| **Наличие Тестов** | **Недостаточно** | Отсутствуют модульные тесты. Тестирование ограничивается функциональными сценариями, описанными в отчете по Заданию 1. |
| **Средства Контроля Корректности Входных Данных** | **Базовый уровень** | Проверка на `NULL` и минимальную длину логина/пароля в `LoginDialog`. В `main_app.py`реализована проверка разрешенных ролей (`allowed_roles`) при обновлении пользователя. |
| **Средства Восстановления при Сбоях** | **Присутствуют** | Реализована функция резервного копирования БД (`backup_database` в `database_module.py`) с использованием `pg_dump`, что является критически важным средством восстановления. |
| **Наличие Комментариев** | **Высокая** | Используются docstrings для описания функций и поясняющие комментарии для сложных SQL-запросов, что соответствует требованиям ТЗ. |
| **Наличие Описаний Основных Функций** | **Высокая** | Все ключевые методы в `RepairTracker` и `DBManager` имеют подробные описания. |

## 2. Руководство Системному Программисту (Структура)

Руководство системному программисту, разработанное в соответствии с ЕСПД, должно служить основным документом для сопровождения системы.

### 2.1. Раздел "Настройка Программного Обеспечения"

Для настройки ПО эксплуатации необходимо выполнить следующие шаги:

1. **Установка Зависимостей:** Установить Python 3.x и библиотеки `psycopg2`, `PyQt5`.

1. **Конфигурация БД:** В файле `database_module.py` необходимо указать корректные параметры подключения к серверу PostgreSQL (имя БД, пользователь, пароль, хост).

1. **Инициализация Схемы:** Запустить скрипт `import_data.py` для создания схемы (`table.sql`) и заполнения начальными данными.

## 3. Модификация Программного Обеспечения: Добавление Роли "Менеджер"

Требование о добавлении роли "Менеджер" уже выполнено в исходной схеме БД (`table.sql`) и логике приложения (`main_app.py`).

### 3.1. Функционал Роли "Менеджер"

| Должностная Инструкция | Реализованный Функционал | Файл |
| --- | --- | --- |
| **Контроль Загрузки** | Доступ к отчету `get_master_load_report`. | `gui.py` , `main_app.py` |
| **Контроль Выполнения** | Доступ к отчету `get_master_performance_report`. | `gui.py`, `main_app.py` |
| **Управление Заявками** | Возможность назначать мастера (`AssignMasterDialog`) и изменять статус заявки. | `gui.py` |

## 4. Предложения по Дальнейшей Модификации

Для повышения устойчивости и функциональности системы предлагается рассмотреть следующие варианты модификации:

1. **Внедрение Журналирования (Логирования):**
  - **Описание:** Использование стандартного модуля `logging` для записи всех критических операций (вход/выход, создание/удаление заявки, ошибки БД) в отдельный файл.
  - **Преимущество:** Упрощение отладки и возможность аудита действий пользователей.

1. **Хеширование Паролей:**
  - **Описание:** Использование криптографических функций (например, `bcrypt` или `hashlib`) для хеширования паролей в таблице `users`.
  - **Преимущество:** Повышение безопасности системы, так как в текущей реализации пароли хранятся в открытом виде.

1. **Улучшенная Валидация Ввода:**
  - **Описание:** Добавление регулярных выражений и проверок типов данных в GUI для всех полей ввода (например, проверка формата номера телефона, email, числовых значений).
  - **Преимущество:** Снижение вероятности ввода некорректных данных и повышение надежности приложения.

